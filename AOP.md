## AOP

##### 概述

AOP（Aspect  Oriented Programming）是一种技术思想，是软件设计领域中面向切片编程，它是面向对象编程的一种补充和完善，它以通过预编译方式和运行期动态代理方式实现，在不修改源代码的情况下，给程序动态系统统一添加额外功能的一种技术。利用AOP可以对业务逻辑开发的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。

##### 相关术语

###### ①横切关注点

分散在各个模块中解决同一样的问题，如用户验证、日志管理、事务处理、数据缓存都属于横切关注点。

从每个方法中抽取出来的同一类非核心业务，在同一个项目中，我们可以使用多个横切关注点对相关方法进行多个不同方面的增强。

这个概念不是语法层面的，而是根据附加功能的逻辑上的需要：有十个附加功能，就有十个横切关注点。

![](D:\JobHuntingJourney\projectlll\projectll\spring66\fig\Fig1.jpg)

###### ②通知（增强）

增强，通俗说，就是你想要增强的功能，比如安全，事务，日志等

每一个横切关注点上要做的事情都需要写一个方法来实现，这样的方法就叫通知方法

- 前置通知：在被代理的目标方法前执行
- 返回通知：在被代理的目标方法成功结束后执行（寿终正寝）
- 异常通知：在被代理的目标方法异常结束后执行（死于非命）
- 后置通知：在被代理的目标方法最终结束后执行（盖棺定论）
- 环绕通知：使用try...catch...finally结构围绕整个代理的目标方法，包括上面四种通知对应的所有位置

![](D:\JobHuntingJourney\projectlll\projectll\spring66\fig\fig2.jpg)

###### ③切面

封装通知方法的类

![](D:\JobHuntingJourney\projectlll\projectll\spring66\fig\fig3.jpg)

###### ④目标

被代理的目标对象

###### ⑤代理

向目标对象应用通知之后创建的代理对象

###### ⑥连接点

把方法排成一排，每个横切位置看成x轴方向，把方法从上到下执行的顺序看成y轴，x轴和y轴的交叉点就是连接点。通俗说，就是spring允许你使用通知的地方。

###### ⑦切入点

定位连接点的方式

每个类的方法中都包含很多连接点，所以连接点是类中客观存在的事务。

如果把连接点看作数据库中的记录，那么切入点就是查询记录的sql语句。

spring的AOP技术可以通过切入点定位到特定的连接点，通俗说，要实际去增强方法

切点通过org.springframework.aop.Pointcut接口进行描述，它使用类和方法作为连接点的查询条件。